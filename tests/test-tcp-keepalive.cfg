# Test configuration to try all four combinations of TCP keep-alives
# enabled/disabled on the frontent/backend.

frontend keepalive-to-keepalive
	bind :8000
	option clitcpka
	tcp-keepalive-time 5
	tcp-keepalive-interval 5
	tcp-keepalive-count 3
	use_backend keepalive

frontend keepalive-to-nokeepalive
	bind :8001
	option clitcpka
	tcp-keepalive-time 5
	tcp-keepalive-interval 5
	tcp-keepalive-count 3
	use_backend nokeepalive

frontend nokeepalive-to-keepalive
	bind :8002
	use_backend keepalive

frontend nokeepalive-to-nokeepalive
	bind :8003
	use_backend nokeepalive

backend keepalive
	option srvtcpka
	tcp-keepalive-time 7
	tcp-keepalive-interval 7
	tcp-keepalive-count 3
	server s1 127.0.0.1:8080

backend nokeepalive
	server s1 127.0.0.1:8081
